<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>CleanExperts — Cotizador</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" sizes="32x32" href="img/favicon_cleanexperts.png">
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/animate.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand"><a href="index.html">CleanExperts</a></div>
    <nav class="nav" aria-label="Navegación principal">
      <ul>
        <li><a class="nav__link" href="login.html">Inicio</a></li>
        <li><a class="nav__link is-active" href="apps.html" aria-current="page">Servicios</a></li>
        <li><a class="nav__link" href="gallery.html">Galería</a></li>
        <li><a class="nav__link" href="contacto.html">Contacto</a></li>
      </ul>
    </nav>
  </header>

  <main class="container">
    <section class="section">
      <h2 class="section__title">Cotizador de servicios</h2>
      <form id="frmCotiza" class="grid2">
        <label>Tipo de servicio
          <select id="tipo">
            <option value="">Seleccione…</option>
            <option value="hogar">Limpieza de hogar</option>
            <option value="oficina">Limpieza de oficina</option>
            <option value="vehiculo">Limpieza de vehículo</option>
          </select>
        </label>

        <label>Tamaño (m²)
          <input id="metros" type="number" min="10" step="1" placeholder="Ej. 80">
        </label>

        <label>Intensidad
          <select id="intensidad">
            <option value="">Seleccione…</option>
            <option value="estandar">Estándar</option>
            <option value="profunda">Profunda</option>
          </select>
        </label>

        <fieldset class="extras">
          <legend>Extras</legend>
          <label><input type="checkbox" value="ventanas" id="exVentanas"> Limpieza de ventanas</label>
          <label><input type="checkbox" value="tapiceria" id="exTapiceria"> Tapicería (sofás/sillas)</label>
          <label><input type="checkbox" value="desinfeccion" id="exDesinfeccion"> Desinfección</label>
        </fieldset>

        <div class="grid2__actions">
          <button type="submit" class="btn btn--primary">Calcular</button>
          <button type="button" id="btnLimpiar" class="btn btn--ghost">Limpiar</button>
        </div>
      </form>
    </section>

    <section class="section">
      <div id="resultado" class="card animate__animated"></div>
    </section>
  </main>

  <footer class="footer"><p>© 2025 CleanExperts</p></footer>

  <script>
  const frm = document.getElementById('frmCotiza');
  const res = document.getElementById('resultado');
  const btnLimpiar = document.getElementById('btnLimpiar');

  frm.addEventListener('submit', function(e){
    e.preventDefault();

    const tipo = document.getElementById('tipo').value;
    const m2   = parseInt(document.getElementById('metros').value,10);
    const inten = document.getElementById('intensidad').value;

    if(!tipo || !inten || isNaN(m2) || m2 <= 0){
      Swal.fire({icon:'warning', title:'Verifique los datos', text:'Complete tipo, m² e intensidad.'});
      return;
    }

    let tarifa = 0; // ₡/m²
    if (tipo === 'hogar') tarifa = 1200;
    else if (tipo === 'oficina') tarifa = 1400;
    else if (tipo === 'vehiculo') tarifa = 900;

    const mult = (inten === 'profunda') ? 1.3 : 1.0;

    const exVentanas = document.getElementById('exVentanas').checked ? 0.20 : 0; // +20% del sub
    const exTapiceria = document.getElementById('exTapiceria').checked ? 15000 : 0; // fijo
    const exDesinf = document.getElementById('exDesinfeccion').checked ? 10000 : 0; // fijo

    const sub = tarifa * m2 * mult;
    const plus = (sub * exVentanas) + exTapiceria + exDesinf;
    const iva = (sub + plus) * 0.13;
    const total = Math.round(sub + plus + iva);

    res.classList.remove('animate__fadeInUp');
    res.innerHTML = `
      <h3>Resultado de la cotización</h3>
      <p><b>Servicio:</b> ${tipo} &nbsp;•&nbsp; <b>Intensidad:</b> ${inten} &nbsp;•&nbsp; <b>Área:</b> ${m2} m²</p>
      <ul class="quote-list">
        <li>Tarifa Basica: ₡ ${Math.round(sub).toLocaleString()}</li>
        <li>Extras: ₡ ${Math.round(plus).toLocaleString()}</li>
        <li>IVA (13%): ₡ ${Math.round(iva).toLocaleString()}</li>
        <li class="quote-total">Total: ₡ ${total.toLocaleString()}</li>
      </ul>
      <p class="muted">* Precios de referencia. Sujeto a inspección.</p>
    `;
    res.classList.add('animate__fadeInUp');

    Swal.fire({
      title: 'Cotización lista',
      text: `Total aproximado: ₡ ${total.toLocaleString()}`,
      icon: 'success',
      confirmButtonColor: '#0d6efd'
    });
  });

  btnLimpiar.addEventListener('click', ()=>{
    frm.reset();
    res.innerHTML = '';
  });
  </script>
</body>
</html>
